$title Ramsey model class demo

$ontext
This code is an adapatation of Alan S.Manne's(1986)
formulation of the classical Ramsey savings model.

This file modifies the class demo with two aditions:
we include the subset, tnotlast(t) for all time periods
up the last and a and a new terminal condition.
$offtext

Sets
    t           time periods /2020*2030/
    tfirst(t)   first period
    tlast(t)    last period
    tnotlast(t) not last period
;

*---------------Input values----------------*
Scalars
    bet     discount factor            /0.95/
    delta   depreciation rate          /0.00/
    alpha   capital output share       /##ALPHA##/
    g       labor growth rate          /0.03/
    ac      absorptive capacity        /0.15/
    k0      initial capital            /3.00/
    i0      initial investment         /0.05/
    c0      initial consumption        /0.95/
    a       output scaling factor
;

Parameters
   beta(t) discount factor
   al(t)   output-labor scaling vector
;
  
*designate first and last period 
tfirst(t) = yes$(ord(t) = 1);
tlast(t)  = yes$(ord(t) = card(t));
tnotlast(t)  = no$(ord(t) = card(t));

*define discount factor (bet) for each time period
beta(t)     = bet**ord(t);
beta(tlast) = beta(tlast)/(1 - bet);

*calculate output-labor scaling
a     = (c0 + i0)/k0**alpha;
al(t) = a*(1 + g)**((1 - alpha)*(ord(t) - 1));

*------------------------------------------------*


*---------------------Model----------------------*
Variables
    k(t) capital stock
    c(t) consumption
    i(t) investment
    utility
;
    
Equation
   cc(t) capacity constraint
   kk(t) capital law of motion
   tc(t) terminal condition
   util  discounted utility
;

cc(t)..             al(t)*k(t)**alpha  =e=  c(t) + i(t);

kk(tnotlast(t))..   k(t+1) =l=  (1-delta)*k(t) + i(t);

tc(tlast)..         (g+delta)*k(tlast) =l=  i(tlast);

util..              utility =e=  sum(t, beta(t)*log(c(t)));

Model ramsey / all /;

*bounds
k.lo(t)      = 0.001;
c.lo(t)      = 0.001;
i.lo(t)      = 0.001;
k.fx(tfirst) = k0;
c.fx(tfirst) = c0;
i.fx(tfirst) = i0;
i.up(t)      = i0*((1 + ac)**(ord(t) - 1));


solve ramsey maximizing utility using nlp

